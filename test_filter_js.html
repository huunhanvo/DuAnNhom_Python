<!DOCTYPE html>
<html>
<head>
    <title>Test Reviews Filter JavaScript</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        .review-card { 
            border: 1px solid #ccc; 
            padding: 15px; 
            margin: 10px; 
            background: #f9f9f9;
            border-radius: 8px;
        }
        .badge { 
            background: #007bff; 
            color: white; 
            padding: 4px 8px; 
            border-radius: 4px; 
            font-size: 12px;
            margin-right: 10px;
        }
        button { 
            margin: 5px; 
            padding: 8px 15px; 
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover { background: #0056b3; }
        #results { 
            background: #e9ecef; 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>üß™ Test Reviews Filter Logic</h1>
    
    <div class="controls">
        <button onclick="testFilter('all')">T·∫•t c·∫£</button>
        <button onclick="testFilter('5')">5 Sao</button>
        <button onclick="testFilter('3')">3 Sao</button>
        <button onclick="testFilter('pending')">Ch·ªù ph·∫£n h·ªìi</button>
        <button onclick="testSort('-rating')">S·∫Øp x·∫øp rating</button>
        <button onclick="testServiceFilter('C·∫Øt t√≥c')">L·ªçc "C·∫Øt t√≥c"</button>
    </div>
    
    <div id="results">S·∫µn s√†ng test...</div>
    
    <!-- Sample review cards -->
    <div class="review-card" data-rating="5" data-replied="true">
        <div class="badge">C·∫Øt t√≥c Basic</div>
        <small>27/09/2025 15:30</small>
        <p><strong>5 Stars - C√≥ ph·∫£n h·ªìi</strong><br>D·ªãch v·ª• tuy·ªát v·ªùi!</p>
    </div>
    
    <div class="review-card" data-rating="3" data-replied="false">
        <div class="badge">G·ªôi ƒë·∫ßu massage</div>
        <small>26/09/2025 10:15</small>
        <p><strong>3 Stars - Ch·ªù ph·∫£n h·ªìi</strong><br>D·ªãch v·ª• b√¨nh th∆∞·ªùng</p>
    </div>
    
    <div class="review-card" data-rating="4" data-replied="true">
        <div class="badge">C·∫Øt t√≥c VIP</div>
        <small>25/09/2025 14:20</small>
        <p><strong>4 Stars - C√≥ ph·∫£n h·ªìi</strong><br>Kh√° h√†i l√≤ng</p>
    </div>
    
    <div class="review-card" data-rating="5" data-replied="false">
        <div class="badge">U·ªën t√≥c</div>
        <small>24/09/2025 09:45</small>
        <p><strong>5 Stars - Ch·ªù ph·∫£n h·ªìi</strong><br>R·∫•t tuy·ªát v·ªùi!</p>
    </div>
    
    <script>
        function testFilter(filter) {
            console.log(`üîç Testing filter: ${filter}`);
            
            $('.review-card').each(function() {
                const $card = $(this);
                let show = true;
                
                if (filter !== 'all') {
                    if (filter === 'pending') {
                        show = $card.data('replied') === false || $card.data('replied') === 'false';
                    } else {
                        show = $card.data('rating') == filter;
                    }
                }
                
                $card.toggle(show);
                console.log(`  Card rating: ${$card.data('rating')}, replied: ${$card.data('replied')}, show: ${show}`);
            });
            
            const visible = $('.review-card:visible').length;
            $('#results').html(`‚úÖ Filter "${filter}" - Hi·ªÉn th·ªã ${visible} ƒë√°nh gi√°`);
        }
        
        function testServiceFilter(serviceName) {
            console.log(`üè∑Ô∏è Testing service filter: ${serviceName}`);
            
            $('.review-card').each(function() {
                const $card = $(this);
                const serviceText = $card.find('.badge').first().text();
                const show = serviceText.includes(serviceName);
                
                $card.toggle(show);
                console.log(`  Service: "${serviceText}", includes "${serviceName}": ${show}`);
            });
            
            const visible = $('.review-card:visible').length;
            $('#results').html(`üè∑Ô∏è Service filter "${serviceName}" - Hi·ªÉn th·ªã ${visible} ƒë√°nh gi√°`);
        }
        
        function testSort(sortType) {
            console.log(`üìä Testing sort: ${sortType}`);
            
            const $container = $('body');
            const $cards = $container.children('.review-card').detach();
            
            $cards.sort(function(a, b) {
                const $a = $(a);
                const $b = $(b);
                
                if (sortType === '-rating') {
                    return $b.data('rating') - $a.data('rating');
                }
                return $a.data('rating') - $b.data('rating');
            });
            
            $container.append($cards);
            $('#results').html(`üìä Sorted by ${sortType} - Th·ª© t·ª± m·ªõi applied`);
            
            // Log new order
            $('.review-card').each(function(index) {
                console.log(`  ${index + 1}. Rating: ${$(this).data('rating')}`);
            });
        }
        
        // Initial setup
        $(document).ready(function() {
            console.log('üöÄ Test page loaded');
            testFilter('all');
        });
    </script>
</body>
</html>